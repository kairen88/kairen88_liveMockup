package com.live.Debugger;

import javafx.scene.layout.Pane;
import javafx.scene.layout.StackPane;
import javafx.scene.shape.Rectangle;

public class CodeWindow2 {
	
	private CodeEditor editor;
	private DraggableNode codeWindowContainer;
	private StackPane codeWindowSP;
	int currentExecutionLine = 0;
	
	public CodeWindow2(String editingCode) {
		//create code window container
		codeWindowContainer = new DraggableNode();
		//initialize codeMirror editor
		editor = new CodeEditor(editingCode);
		
		//creating code window background
		Rectangle codeWindowBackground = new Rectangle(700, 400);
		javafx.scene.paint.Paint codeMirrorBackgroundColor = javafx.scene.paint.Paint.valueOf("CCCCCC");
		codeWindowBackground.setFill(codeMirrorBackgroundColor);
		codeWindowBackground.setArcHeight(15);
		codeWindowBackground.setArcWidth(15);
		
		//creating stack pane to stack elements in code window
		codeWindowSP = new StackPane();
		//add editor in a new pane
		Pane eidtorPane = new Pane();
		eidtorPane.getChildren().add(editor);
		//add elements to code window stack pane
		codeWindowSP.getChildren().add(codeWindowBackground);
		codeWindowSP.getChildren().add(eidtorPane);
//				codeWindowSP.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
		//add stack pane to draggable node container
		codeWindowContainer.getChildren().add(codeWindowSP);
	}
	
	public DraggableNode getRootNode()
	{
		return codeWindowContainer;	
	}
	
	public void setLineColorToCompleted(int lineNum)
	{
		editor.webview.getEngine().executeScript("editor.setLineClass(" + String.valueOf(lineNum) + ", null, 'test');");
	}
	
	public int getCurrentExecutionLine()
	{
		return currentExecutionLine;
	}
	
	public void setCurrentExecutionLine(int newLineNum)
	{
		this.currentExecutionLine = newLineNum ;
	}
	
	public void incrementCurrentExecutionLine()
	{
		this.currentExecutionLine += 1;
	}

}
