<?xml version="1.0" encoding="UTF-8"?>
<project name="zz.csg" default="jar" basedir="." >
	
	<target name="init">
		<property name="path.src.java" location="${basedir}/src"/>
		
		<property name="path.build" location="${basedir}/build"/>
		<property name="path.classes" location="${basedir}/classes"/>
		<property name="path.lib" location="${basedir}/lib"/>
		<property name="path.javadoc" location="${basedir}/doc"/>
		
        <property name="zz.utils.dir" value="${basedir}/../zz.utils"/>

		
        <path id="default.classpath">
            <pathelement path="${path.lib}/zz.utils.jar"/>
            <pathelement path="${path.lib}/log4j.jar"/>
            <pathelement path="${path.lib}/junit.jar"/>
        </path>
    	

	</target>	
		
	<target name="clean" depends="init">
		<delete includeemptydirs="true" failonerror="false">
			<fileset dir="${path.classes}"/>
			<fileset dir="${path.build}"/>
			<fileset dir="${path.javadoc}"/>
		</delete>
	</target>
	
	<target name="compile" depends="init, dep.all">
		<mkdir dir="${path.classes}"/>
		
        <javac compiler="javac1.5" source="1.5" target="1.5"
        	debug="yes" nowarn="yes"
            srcdir="${path.src.java}"
            destdir="${path.classes}"
            classpathref="default.classpath"/>

	</target>
	
	<target name="jar" depends="init, compile">
		<mkdir dir="${path.build}"/>
		<jar destfile="${path.build}/zz.csg.jar" basedir="${path.classes}"/>
	</target>
	
	
	<target name="jdoc">
		
		<echo message="Creating JavaDoc"/>
		<mkdir dir="${path.javadoc}"/>
		
		<javadoc
			packagenames="*"
			sourcepath="${path.src.java}"
			destdir="${path.javadoc}"
			source="1.5"
			verbose="no"/>
		
	</target>
	
	<target name="dep.zz.utils" depends="init">
		<ant 
			antfile="${zz.utils.dir}/build.xml" 
			dir="${zz.utils.dir}" 
			target="jar"
			inheritall="false"/>
		<echo message="Finished building zz.utils"/>
		<copy todir="lib">
			<fileset dir="${zz.utils.dir}/build" includes="zz.utils.jar"/>
		</copy>
	</target>
	
	<target name="dep.all" depends="dep.zz.utils"/>
	
	
</project>
